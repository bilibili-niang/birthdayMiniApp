import{a as C,n as b}from"./index-ES7BnZvW.js";import{d as j,m as i,v as k,p as S,b as o,h as q,o as s,q as I,s as A,t as O,u as N,w as E,x as J}from"./vendor-CNxIU86K.js";import{r as L,a as T}from"./request-D8QPoEHx.js";const V=async a=>L({method:"post",url:"/api/tool/translate",data:a});async function U(a){try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(a),!0}catch{}try{const e=document.createElement("textarea");e.value=a,e.style.position="fixed",e.style.left="-9999px",e.style.top="0",document.body.appendChild(e),e.focus(),e.select();const l=document.execCommand("copy");return document.body.removeChild(e),l}catch{return!1}}function g(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!J(a)}function B(a){return a.split(" ").map((e,l)=>l===0?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join("")}const f="translationHistory";function F(a){let e=p();e||(e=[]),e=e.filter(l=>l.query!==a.query),e.unshift(a),localStorage.setItem(f,JSON.stringify(e))}function p(){const a=localStorage.getItem(f);return a?JSON.parse(a):null}const H=j({name:"componentName",props:{},emits:[""],setup(a,{emit:e}){const l=i("\u5C40\u90E8\u53D8\u91CF"),c=i([]),u=i([]),d=i(!1),x=async t=>{await U(t)?C("\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F"):b("\u590D\u5236\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u590D\u5236")};console.log("vuetify"),console.log(k),S(()=>{y()});const y=()=>{const t=p();if(t&&(u.value=t,t.length>0)){const n=t[t.length-1];l.value=n.query,c.value=n.translation}},h=()=>{l.value&&(d.value=!0,V({keyword:l.value}).then(t=>{if(t.success&&t.data&&Array.isArray(t.data.translation)){const n=t.data.translation.map(r=>B(r));c.value=n,F({query:l.value,translation:n}),u.value=p()||[],console.log("data.value:"),console.log(c.value)}else console.error("Invalid response from API:",t)}).catch(t=>{console.error("Error in translation:",t),b("\u67E5\u8BE2\u5931\u8D25")}).finally(()=>{d.value=!1}))},m=q;return()=>{var n;let t;return o("div",{class:"flex"},[o("div",{class:"flex w-75 mr-auto ml-auto p-3 flex-col"},[o("div",{class:"flex flex-row items-center mt-3 mb-3"},[o(m,{class:"mr-2",variant:"outlined",onClick:()=>{T()}},{default:()=>[s("back")]}),o(I,{class:"mr-3 ml-3",modelValue:l.value,"onUpdate:modelValue":r=>l.value=r,label:"\u8BF7\u8F93\u5165\u4E2D/\u82F1\u6587"},null),o(m,{variant:"outlined",onClick:h},{default:()=>[s("\u67E5\u8BE2")]})]),o("div",{class:"flex flex-col"},[c.value.map(r=>o("div",{class:""},[r])),d.value&&o("div",null,[s("\u52A0\u8F7D\u4E2D...")])]),((n=u.value)==null?void 0:n.length)>0&&o("div",{class:"mt-4 p-3 rounded-lg elevation-2 border border-[var(--ui-border-color)] bg-[var(--ui-bg)] text-[var(--color-text-base)]"},[o("div",{class:"flex-row flex justify-between !p-3"},[o("h3",{class:"text-h6 mb-2 "},[s("\u5386\u53F2\u67E5\u8BE2\u8BB0\u5F55")]),o(m,{onClick:()=>{localStorage.removeItem(f),setTimeout(y,500)}},{default:()=>[s("\u6E05\u9664\u4E00\u4E0B")]})]),o(A,null,g(t=u.value.map((r,w)=>{let v;return o(O,{key:w,class:"mb-2 cursor-pointer hover:bg-[var(--ui-bg-hover)] rounded",onClick:()=>x(r.translation.join(", "))},{default:()=>[o(N,{class:"cursor-pointer"},{default:()=>[r.query]}),o(E,null,g(v=r.translation.join(", "))?v:{default:()=>[v]})]})}))?t:{default:()=>[t]})])])])}}});export{H as default};
