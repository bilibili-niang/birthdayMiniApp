import{a as V}from"./jump-BYQa-VNz.js";import{j as q,d as B,r as n,v as O,o as U,b as a,V as L,i as c,k as N,l as P,m as T,n as z,p as E,q as J,s as H,t as D,u as F}from"./vendor-gMTP76c6.js";import"./index-CZCa09lz.js";async function K(e){try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0}catch{}try{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-9999px",t.style.top="0",document.body.appendChild(t),t.focus(),t.select();const o=document.execCommand("copy");return document.body.removeChild(t),o}catch{return!1}}const w=()=>({Authorization:localStorage.getItem("Authorization")||"Basic c3U6c3Vfc2VjcmV0","Blade-Auth":localStorage.getItem("Blade-Auth")}),f=q.create({baseURL:"https://birthday.icestone.work",timeout:3e4,headers:{...w()}}),M=e=>{var t;return(t=e.response)==null||t.status,Promise.reject(e)};f.interceptors.request.use(async e=>(Object.assign(e.headers,w()),e.noToken?(e.headers["Blade-Auth"]=null,delete e.headers["Blade-Auth"]):e.headers["Blade-Auth"]=localStorage.getItem("Blade-Auth"),e)),f.interceptors.response.use(async e=>Promise.resolve(e.data),M);const R=async e=>f({method:"post",url:"/api/tool/translate",data:e});function A(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!F(e)}function W(e){return e.split(" ").map((t,o)=>o===0?t.toLowerCase():t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join("")}const h="translationHistory";function _(e){let t=y();t||(t=[]),t=t.filter(o=>o.query!==e.query),t.unshift(e),localStorage.setItem(h,JSON.stringify(t))}function y(){const e=localStorage.getItem(h);return e?JSON.parse(e):null}const $=B({name:"componentName",props:{},emits:[""],setup(e,{emit:t}){const o=n("\u5C40\u90E8\u53D8\u91CF"),u=n([]),i=n([]),m=n(!1),d=n(!1),g=n(""),C=n(2e3),b=n("success"),x=n("mdi-check-circle"),j=async l=>{const r=await K(l);g.value=r?"\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F":"\u590D\u5236\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u590D\u5236",b.value=r?"success":"error",x.value=r?"mdi-check-circle":"mdi-alert-circle",d.value=!0};console.log("vuetify"),console.log(O),U(()=>{k()});const k=()=>{const l=y();if(l&&(i.value=l,l.length>0)){const r=l[l.length-1];o.value=r.query,u.value=r.translation}},S=()=>{o.value&&(m.value=!0,R({keyword:o.value}).then(l=>{if(l.success&&l.data&&Array.isArray(l.data.translation)){const r=l.data.translation.map(s=>W(s));u.value=r,_({query:o.value,translation:r}),i.value=y()||[],console.log("data.value:"),console.log(u.value)}else console.error("Invalid response from API:",l)}).catch(l=>{console.error("Error in translation:",l)}).finally(()=>{m.value=!1}))},v=L;return()=>{var r;let l;return a("div",{class:"flex"},[a("div",{class:"flex w-75 mr-auto ml-auto p-3 flex-col"},[a("div",{class:"flex flex-row items-center mt-3 mb-3"},[a(v,{class:"mr-2",variant:"outlined",onClick:()=>{V()}},{default:()=>[c("back")]}),a(N,{class:"mr-3 ml-3",modelValue:o.value,"onUpdate:modelValue":s=>o.value=s,label:"\u8BF7\u8F93\u5165\u4E2D/\u82F1\u6587"},null),a(v,{variant:"outlined",onClick:S},{default:()=>[c("\u67E5\u8BE2")]})]),a("div",{class:"flex flex-col"},[u.value.map(s=>a("div",{class:""},[s])),m.value&&a("div",null,[c("\u52A0\u8F7D\u4E2D...")])]),((r=i.value)==null?void 0:r.length)>0&&a("div",{class:"mt-4 p-3 rounded-lg elevation-2 border border-[var(--ui-border-color)] bg-[var(--ui-bg)] text-[var(--color-text-base)]"},[a("div",{class:"flex-row flex justify-between !p-3"},[a("h3",{class:"text-h6 mb-2 "},[c("\u5386\u53F2\u67E5\u8BE2\u8BB0\u5F55")]),a(v,{onClick:()=>{localStorage.removeItem(h),setTimeout(k,500)}},{default:()=>[c("\u6E05\u9664\u4E00\u4E0B")]})]),a(P,null,A(l=i.value.map((s,I)=>{let p;return a(T,{key:I,class:"mb-2 cursor-pointer hover:bg-[var(--ui-bg-hover)] rounded",onClick:()=>j(s.translation.join(", "))},{default:()=>[a(z,{class:"cursor-pointer"},{default:()=>[s.query]}),a(E,null,A(p=s.translation.join(", "))?p:{default:()=>[p]})]})}))?l:{default:()=>[l]})])]),a(J,{modelValue:d.value,"onUpdate:modelValue":s=>d.value=s,timeout:C.value,location:"top end",color:b.value,rounded:"lg",variant:"tonal",transition:"slide-x-reverse-transition"},{actions:()=>a(D,{variant:"text",onClick:()=>d.value=!1},{default:()=>[c("\u5173\u95ED")]}),default:()=>a("div",{class:"flex items-center"},[a(H,{class:"mr-2",icon:x.value},null),a("span",null,[g.value])])})])}}});export{$ as default};
