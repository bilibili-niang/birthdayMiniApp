import{a as j}from"./jump-BL6T3vZQ.js";import{j as k,d as S,r as i,v as q,k as w,o as I,b as t,V as f,i as n,l as B,m as C,n as V,p as O,q as L,s as N}from"./vendor-N6nKVYoF.js";import"./index-CMfukpvh.js";const y=()=>({Authorization:localStorage.getItem("Authorization")||"Basic c3U6c3Vfc2VjcmV0","Blade-Auth":localStorage.getItem("Blade-Auth")}),v=k.create({baseURL:"https://birthday.icestone.work",timeout:3e4,headers:{...y()}}),T=e=>{var l;return(l=e.response)==null||l.status,Promise.reject(e)};v.interceptors.request.use(async e=>(Object.assign(e.headers,y()),e.noToken?(e.headers["Blade-Auth"]=null,delete e.headers["Blade-Auth"]):e.headers["Blade-Auth"]=localStorage.getItem("Blade-Auth"),e)),v.interceptors.response.use(async e=>Promise.resolve(e.data),T);const U=async e=>v({method:"post",url:"/api/tool/translate",data:e});function b(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!N(e)}function P(e){return e.split(" ").map((l,o)=>o===0?l.toLowerCase():l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join("")}const p="translationHistory";function z(e){let l=h();l||(l=[]),l=l.filter(o=>o.query!==e.query),l.unshift(e),localStorage.setItem(p,JSON.stringify(l))}function h(){const e=localStorage.getItem(p);return e?JSON.parse(e):null}const E=S({name:"componentName",props:{},emits:[""],setup(e,{emit:l}){const o=i("\u5C40\u90E8\u53D8\u91CF"),u=i([]),c=i([]),d=i(!1);console.log("vuetify"),console.log(q),w({theme:{defaultTheme:"dark"}}),I(()=>{g()});const g=()=>{const a=h();if(a&&(c.value=a,a.length>0)){const s=a[a.length-1];o.value=s.query,u.value=s.translation}},A=()=>{o.value&&(console.log("query.value:"),console.log(o.value),d.value=!0,U({keyword:o.value}).then(a=>{if(a.success&&a.data&&Array.isArray(a.data.translation)){const s=a.data.translation.map(r=>P(r));u.value=s,z({query:o.value,translation:s}),c.value=h()||[],console.log("data.value:"),console.log(u.value)}else console.error("Invalid response from API:",a)}).catch(a=>{console.error("Error in translation:",a)}).finally(()=>{d.value=!1}))};return()=>{var s;let a;return t("div",{class:"flex"},[t("div",{class:"flex w-75 mr-auto ml-auto p-3 flex-col"},[t("div",{class:"flex flex-row items-center mt-3 mb-3"},[t(f,{class:"mr-2",variant:"outlined",onClick:()=>{j()}},{default:()=>[n("back")]}),t(B,{class:"mr-3 ml-3",modelValue:o.value,"onUpdate:modelValue":r=>o.value=r,label:"\u8BF7\u8F93\u5165\u4E2D/\u82F1\u6587"},null),t(f,{variant:"outlined",onClick:A},{default:()=>[n("\u67E5\u8BE2")]})]),t("div",{class:"flex flex-col"},[u.value.map(r=>t("div",{class:""},[r])),d.value&&t("div",null,[n("\u52A0\u8F7D\u4E2D...")])]),((s=c.value)==null?void 0:s.length)>0&&t("div",{class:"mt-4 pa-3 rounded-lg bg-grey-lighten-5 elevation-2"},[t("div",{class:"flex-row flex justify-between"},[t("h3",{class:"text-h6 mb-2"},[n("\u5386\u53F2\u67E5\u8BE2\u8BB0\u5F55")]),t(f,{onClick:()=>{localStorage.removeItem(p),setTimeout(g,500)}},{default:()=>[n("\u6E05\u9664\u4E00\u4E0B")]})]),t(C,null,b(a=c.value.map((r,x)=>{let m;return t(V,{key:x,class:"mb-2"},{default:()=>[t(O,null,{default:()=>[r.query]}),t(L,null,b(m=r.translation.join(", "))?m:{default:()=>[m]})]})}))?a:{default:()=>[a]})])])])}}});export{E as default};
